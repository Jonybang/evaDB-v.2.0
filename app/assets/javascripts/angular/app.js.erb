/**
 * Created by jonybang on 03.07.15.
 */
'use strict';

angular.module('app', ['ngResource', 'ngRoute', 'app.loading', 'ui.bootstrap', 'ui.bootstrap.showErrors', 'angular-date-picker-polyfill', 'ng-rails-csrf', 'angularMoment', 'notyModule'])
        .config(['$routeProvider', '$locationProvider', 'showErrorsConfigProvider', function($routeProvider, $locationProvider, showErrorsConfigProvider) {
            $routeProvider
                    .when('/',          {controller: 'TasksCtrl',    templateUrl: '<%= asset_path('angular/templates/tasks/index.html') %>'})
                    .when('/projects', {controller: 'ProjectsIndexCtrl',   templateUrl: '<%= asset_path('angular/templates/projects/index.html') %>'})
                    .when('/projects/new', {controller: 'ProjectsCreateCtrl',   templateUrl: '<%= asset_path('angular/templates/projects/new.html') %>'})
                    .when('/projects/:id', {controller: 'ProjectsShowCtrl',     templateUrl: '<%= asset_path('angular/templates/projects/show.html') %>'})
                    .otherwise({redirectTo: '/'});
            $locationProvider.html5Mode(true);
            showErrorsConfigProvider.showSuccess(true);
        }]);

angular.module('app').run(['amMoment', function(amMoment) {
    amMoment.changeLocale('ru');
}]);