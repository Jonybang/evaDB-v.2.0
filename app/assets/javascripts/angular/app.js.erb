/**
 * Created by jonybang on 03.07.15.
 */
'use strict';

angular.module('app', ['ngResource', 'app.loading', 'ui.bootstrap', 'ui.bootstrap.showErrors', 'angular-date-picker-polyfill', 'ng-rails-csrf', 'angularMoment', 'notyModule', 'ui.router', 'ui.router.tabs'])
        .config(['$urlRouterProvider', '$stateProvider', '$locationProvider', 'showErrorsConfigProvider', function($urlRouterProvider, $stateProvider, $locationProvider, showErrorsConfigProvider) {
//            $routeProvider
//                    .when('/',          {controller: 'TasksCtrl',    templateUrl: '<%= asset_path('angular/templates/tasks/index.html') %>'})
//                    .when('/projects', {controller: 'ProjectsIndexCtrl',   templateUrl: '<%= asset_path('angular/templates/projects/index.html') %>'})
//                    .when('/projects/new', {controller: 'ProjectsCreateCtrl',   templateUrl: '<%= asset_path('angular/templates/projects/new.html') %>'})
//                    .when('/projects/:id', {controller: 'ProjectsShowCtrl',     templateUrl: '<%= asset_path('angular/templates/projects/show.html') %>'})
//                    .otherwise({redirectTo: '/'});
            //
            // For any unmatched url, redirect to /state1
            $urlRouterProvider.otherwise("/tasks");
            //
            // Now set up the states
            $stateProvider
                    .state('app', {
                        url: '',
                        controller: 'AppCtrl',
                        templateUrl: '<%= asset_path('angular/templates/index.html') %>'
                    })
                    .state('app.tasks', {
                        url: '/tasks',
                        templateUrl: '<%= asset_path('angular/templates/tasks/index.html') %>',
                        controller: 'TasksCtrl'
                    })
                    .state('app.projects', {
                        url: '/projects',
                        templateUrl: '<%= asset_path('angular/templates/projects/index.html') %>',
                        controller: 'ProjectsIndexCtrl'
                    })
                    .state('app.projects_new', {
                        url: '/projects/new',
                        templateUrl: '<%= asset_path('angular/templates/projects/new.html') %>',
                        controller: 'ProjectsCreateCtrl'
                    });
            $locationProvider.html5Mode(true);

            showErrorsConfigProvider.showSuccess(true);
        }]);

angular.module('app').run(['amMoment', function(amMoment) {
    amMoment.changeLocale('ru');
}]);