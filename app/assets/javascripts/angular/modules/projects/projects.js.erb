/**
 * Created by jonybang on 10.07.15.
 */
angular.module('app.projects', ['ngResource', 'ui.bootstrap', 'ui.bootstrap.showErrors', 'angular-date-picker-polyfill', 'ng-rails-csrf', 'angularMoment', 'noty', 'ui.router', 'ui.router.tabs', 'ui.select', 'ngSanitize'])
        .config(['$urlRouterProvider', '$stateProvider', 'uiSelectConfig', function($urlRouterProvider, $stateProvider, uiSelectConfig) {

            <% @templates_path = 'angular/modules/projects/templates/' %>

            $stateProvider
                    .state('app.projects', {
                        url: '/projects',
                        abstract: true,
                        template: '<ui-view/>'
                    })
                    .state('app.projects.index', {
                        url: '',
                        templateUrl: '<%= asset_path(@templates_path + 'index.html') %>',
                        controller: 'ProjectsIndexCtrl'
                    })
                    .state('app.projects.new', {
                        url: '/new',
                        templateUrl: '<%= asset_path(@templates_path + 'new.html') %>',
                        controller: 'ProjectsCreateCtrl'
                    })
                    .state('app.projects.show', {
                        url: '/:projectId',
                        abstract: true,
                        templateUrl: '<%= asset_path(@templates_path + 'show.html') %>',
                        controller: 'ProjectsShowCtrl as show'
                    })
                    .state('app.projects.show.description', {
                        url: '',
                        templateUrl: '<%= asset_path(@templates_path + 'description.html') %>',
                        controller: 'ProjectsDescCtrl'
                    })
                    .state('app.projects.show.tasks', {
                        url: '/tasks',
                        abstract: true,
                        templateUrl: '<%= asset_path(@templates_path + 'tasks.html') %>',
                        controller: 'ProjectsTasksCtrl',
                        controllerAs: 'tasks'
                    })
                    .state('app.projects.show.tasks.table', {
                        url: '',
                        templateUrl: '<%= asset_path(@templates_path + 'tasks_table.html') %>'
                    })
                    .state('app.projects.show.tasks.scheme', {
                        url: '/scheme',
                        templateUrl: '<%= asset_path(@templates_path + 'tasks_scheme.html') %>'
                    })
                    .state('app.projects.show.tasks.map', {
                        url: '/map',
                        templateUrl: '<%= asset_path(@templates_path + 'tasks_map.html') %>'
                    });
            uiSelectConfig.theme = 'bootstrap';
        }]);
